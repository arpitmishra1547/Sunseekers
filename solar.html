<!DOCTYPE html>
<html>
  <head>
    <title>Dual-Axis Solar Tracker Dashboard</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>☀️</text></svg>">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="darkMode.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            colors: {
              primary: '#FFD700',
              secondary: '#FFA500',
            },
            animation: {
              'gradient': 'gradient 3s ease infinite',
              'sun-path': 'sunPath 20s linear infinite',
            },
            keyframes: {
              gradient: {
                '0%, 100%': { backgroundPosition: '0% 0' },
                '50%': { backgroundPosition: '100% 0' },
              },
              sunPath: {
                '0%': { left: '-30px', top: '50px' },
                '25%': { left: '25%', top: '20px' },
                '50%': { left: '50%', top: '50px' },
                '75%': { left: '75%', top: '20px' },
                '100%': { left: 'calc(100% + 30px)', top: '50px' },
              },
            },
          },
        },
      }
    </script>
    <style>
      /* Keep only custom styles that can't be done with Tailwind */
      .brand-name {
        background: linear-gradient(90deg, #ffffff, #FFE5B4);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        background-size: 200% 100%;
        animation: gradient 3s ease infinite;
      }

      .keyword { color: #569cd6; }
      .function { color: #dcdcaa; }
      .string { color: #ce9178; }
      .comment { color: #6a9955; }
      .variable { color: #9cdcfe; }
      .number { color: #b5cea8; }
    </style>
  </head>
  <body class="font-sans text-center bg-gradient-to-br from-[#1e3c72] via-[#2a5298] to-[#1e3c72] min-h-screen m-0 p-5 text-white pt-20">
    <!-- Navigation Bar -->
    <nav class="fixed top-0 left-0 right-0 z-50 bg-white/10 backdrop-blur-md p-4">
      <div class="max-w-7xl mx-auto flex justify-between items-center">
        <a href="solar.html" class="flex items-center gap-2.5 no-underline">
          <div class="w-10 h-10 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center relative overflow-hidden">
            <div class="absolute w-full h-full bg-radial-gradient from-white/80 to-transparent"></div>
          </div>
          <span class="brand-name text-2xl font-bold uppercase tracking-wider">SunSeekers</span>
        </a>
        <div class="flex gap-5 items-center">
          <a href="solar.html" class="text-white no-underline text-lg font-bold hover:text-primary transition-colors">Home</a>
          <a href="about.html" class="text-white no-underline text-lg font-bold hover:text-primary transition-colors">About</a>
          <a href="contact.html" class="text-white no-underline text-lg font-bold hover:text-primary transition-colors">Contact</a>
          <button class="dark-mode-toggle flex items-center gap-2 px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg transition-colors" onclick="toggleDarkMode()">
            <i class="fas fa-moon"></i>
            <span>Dark Mode</span>
          </button>
        </div>
      </div>
    </nav>

    <div class="max-w-7xl mx-auto p-5">
      <div id="typingText" class="text-white mb-8 text-4xl font-semibold tracking-wide min-h-[1.2em] inline-block relative"></div>
      <h1 class="hidden">Dual-Axis Solar Tracker Dashboard</h1>
      
      <div class="flex flex-col gap-8 mt-5">
        <!-- Animation Section -->
        <div class="bg-white/10 backdrop-blur-md rounded-2xl p-6 shadow-lg border border-white/10">
          <h2 class="text-white text-2xl mb-5 text-left border-b border-white/20 pb-2.5">Live Tracker Demo</h2>
          <div class="relative w-full h-[400px] bg-gradient-to-b from-sky-300 to-[#1e3c72] rounded-lg overflow-hidden my-5">
            <!-- Sun element with improved animation -->
            <div class="absolute w-[60px] h-[60px] bg-gradient-to-br from-primary to-secondary rounded-full shadow-[0_0_50px_#FFD700] animate-sun-path"></div>
            
            <!-- Solar panel with improved structure and animation -->
            <div class="absolute bottom-[50px] left-1/2 -translate-x-1/2 w-[120px] h-[80px] bg-[#2c3e50] rounded flex justify-center items-center transition-all duration-500" id="solarPanel">
              <div class="w-[100px] h-[60px] bg-gradient-to-br from-[#34495e] to-[#2c3e50] rounded relative">
                <!-- LDR sensors with improved positioning -->
                <div class="absolute w-3 h-3 bg-red-500 rounded-full top-1 left-1 shadow-[0_0_10px_#ff0000]"></div>
                <div class="absolute w-3 h-3 bg-red-500 rounded-full top-1 right-1 shadow-[0_0_10px_#ff0000]"></div>
                <div class="absolute w-3 h-3 bg-red-500 rounded-full bottom-1 left-1 shadow-[0_0_10px_#ff0000]"></div>
                <div class="absolute w-3 h-3 bg-red-500 rounded-full bottom-1 right-1 shadow-[0_0_10px_#ff0000]"></div>
              </div>
            </div>
          </div>
          <div class="flex justify-center gap-5 mt-5">
            <button onclick="startAnimation()" class="px-5 py-2.5 bg-white/10 text-white border border-white/20 rounded-lg cursor-pointer transition-all hover:bg-white/20 hover:-translate-y-0.5 backdrop-blur-sm">Start Animation</button>
            <button onclick="stopAnimation()" class="px-5 py-2.5 bg-white/10 text-white border border-white/20 rounded-lg cursor-pointer transition-all hover:bg-white/20 hover:-translate-y-0.5 backdrop-blur-sm">Stop Animation</button>
            <button onclick="resetAnimation()" class="px-5 py-2.5 bg-white/10 text-white border border-white/20 rounded-lg cursor-pointer transition-all hover:bg-white/20 hover:-translate-y-0.5 backdrop-blur-sm">Reset</button>
          </div>
          <div id="statusDisplay" class="text-center mt-4 text-white font-bold">Click 'Start Animation' to see the tracker in action</div>
          <div class="mt-5 p-4 bg-white/5 rounded-lg border border-white/10">
            <h4 class="text-white mb-2.5">How the Dual-Axis Solar Tracker Works:</h4>
            <p class="text-white/80 leading-relaxed">1. The sun moves across the sky (shown by the animated sun)</p>
            <p class="text-white/80 leading-relaxed">2. Four LDR sensors (red dots) detect sunlight intensity from different angles</p>
            <p class="text-white/80 leading-relaxed">3. The solar panel automatically adjusts its position to maximize sun exposure</p>
            <p class="text-white/80 leading-relaxed">4. The system continuously monitors and adjusts to maintain optimal alignment</p>
          </div>
        </div>

        <!-- LDR Readings and Graph Section -->
        <div class="bg-white/10 backdrop-blur-md rounded-2xl p-6 shadow-lg border border-white/10">
          <h2 class="text-white text-2xl mb-5 text-left border-b border-white/20 pb-2.5">LDR Sensor Readings & Graph</h2>
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Left Section: LDR Readings -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
              <div class="bg-white/10 backdrop-blur-md rounded-xl p-5 shadow-lg transition-transform hover:-translate-y-1 border border-white/10">
                <div class="text-lg text-white font-bold mb-4">Top Left LDR</div>
                <div id="TL" class="text-4xl font-bold text-white my-2.5">--</div>
                <div class="w-4 h-4 rounded-full bg-green-500 shadow-[0_0_10px_#4CAF50] inline-block ml-2.5"></div>
              </div>
              <div class="bg-white/10 backdrop-blur-md rounded-xl p-5 shadow-lg transition-transform hover:-translate-y-1 border border-white/10">
                <div class="text-lg text-white font-bold mb-4">Top Right LDR</div>
                <div id="TR" class="text-4xl font-bold text-white my-2.5">--</div>
                <div class="w-4 h-4 rounded-full bg-green-500 shadow-[0_0_10px_#4CAF50] inline-block ml-2.5"></div>
              </div>
              <div class="bg-white/10 backdrop-blur-md rounded-xl p-5 shadow-lg transition-transform hover:-translate-y-1 border border-white/10">
                <div class="text-lg text-white font-bold mb-4">Bottom Left LDR</div>
                <div id="BL" class="text-4xl font-bold text-white my-2.5">--</div>
                <div class="w-4 h-4 rounded-full bg-green-500 shadow-[0_0_10px_#4CAF50] inline-block ml-2.5"></div>
              </div>
              <div class="bg-white/10 backdrop-blur-md rounded-xl p-5 shadow-lg transition-transform hover:-translate-y-1 border border-white/10">
                <div class="text-lg text-white font-bold mb-4">Bottom Right LDR</div>
                <div id="BR" class="text-4xl font-bold text-white my-2.5">--</div>
                <div class="w-4 h-4 rounded-full bg-green-500 shadow-[0_0_10px_#4CAF50] inline-block ml-2.5"></div>
              </div>
            </div>

            <!-- Right Section: Graph -->
            <div class="relative h-[400px] w-full bg-white/5 rounded-xl p-4">
              <canvas id="ldrGraph"></canvas>
            </div>
          </div>
        </div>

        <!-- Servo Angles Section -->
        <div class="bg-white/10 backdrop-blur-md rounded-2xl p-6 shadow-lg border border-white/10">
          <h2 class="text-white text-2xl mb-5 text-left border-b border-white/20 pb-2.5">Servo Motor Angles</h2>
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Left Section: Servo Readings -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
              <div class="bg-white/10 backdrop-blur-md rounded-xl p-5 shadow-lg transition-transform hover:-translate-y-1 border border-white/10">
                <div class="text-lg text-white font-bold mb-4">Horizontal Servo</div>
                <div id="horizontalAngle" class="text-4xl font-bold text-white my-2.5">--</div>
                <div class="w-4 h-4 rounded-full bg-green-500 shadow-[0_0_10px_#4CAF50] inline-block ml-2.5"></div>
              </div>
              <div class="bg-white/10 backdrop-blur-md rounded-xl p-5 shadow-lg transition-transform hover:-translate-y-1 border border-white/10">
                <div class="text-lg text-white font-bold mb-4">Vertical Servo</div>
                <div id="verticalAngle" class="text-4xl font-bold text-white my-2.5">--</div>
                <div class="w-4 h-4 rounded-full bg-green-500 shadow-[0_0_10px_#4CAF50] inline-block ml-2.5"></div>
              </div>
            </div>

            <!-- Right Section: Circular Gauges -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
              <div class="relative h-[250px] w-full bg-white/5 rounded-xl p-4">
                <canvas id="horizontalGauge"></canvas>
                <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-center">
                  <div class="text-2xl font-bold text-white" id="horizontalGaugeValue">--°</div>
                  <div class="text-sm text-white/80">Horizontal</div>
                </div>
              </div>
              <div class="relative h-[250px] w-full bg-white/5 rounded-xl p-4">
                <canvas id="verticalGauge"></canvas>
                <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-center">
                  <div class="text-2xl font-bold text-white" id="verticalGaugeValue">--°</div>
                  <div class="text-sm text-white/80">Vertical</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Arduino IDE Section -->
    <div class="max-w-7xl mx-auto p-5">
      <div class="bg-white/10 backdrop-blur-md rounded-2xl p-6 shadow-lg border border-white/10 h-[600px] flex flex-col">
        <div class="flex gap-8 flex-1 min-h-0">
          <div class="flex-1 text-white overflow-y-auto pr-4 max-h-full">
            <h2 class="text-2xl font-bold mb-5 text-left border-b border-white/20 pb-2.5">Arduino IDE Integration</h2>
            <p class="text-white/80 leading-relaxed mb-4">The Dual-Axis Solar Tracker is powered by an Arduino microcontroller, which processes sensor data and controls the servo motors for optimal solar panel positioning.</p>
            <p class="text-white/80 leading-relaxed mb-4">Our system uses:</p>
            <ul class="text-white/80 leading-relaxed list-none pl-0">
              <li class="mb-2.5 pl-5 relative before:content-['•'] before:absolute before:left-0 before:text-xl">4 LDR sensors for light detection</li>
              <li class="mb-2.5 pl-5 relative before:content-['•'] before:absolute before:left-0 before:text-xl">2 servo motors for dual-axis movement</li>
              <li class="mb-2.5 pl-5 relative before:content-['•'] before:absolute before:left-0 before:text-xl">Real-time data processing</li>
              <li class="mb-2.5 pl-5 relative before:content-['•'] before:absolute before:left-0 before:text-xl">Automatic sun tracking algorithm</li>
            </ul>
            <p class="text-white/80 leading-relaxed">The code is optimized for efficiency and reliability, ensuring smooth operation and maximum energy collection throughout the day.</p>
          </div>
          <div class="flex-1 font-mono text-[#d4d4d4] text-left flex flex-col max-h-full bg-[#1e1e1e] rounded-lg shadow-md">
            <div class="bg-[#2d2d2d] p-2.5 rounded-t-lg flex items-center gap-2.5 flex-shrink-0">
              <div class="w-3 h-3 rounded-full bg-[#ff5f56]"></div>
              <div class="w-3 h-3 rounded-full bg-[#ffbd2e]"></div>
              <div class="w-3 h-3 rounded-full bg-[#27c93f]"></div>
              <span class="text-[#d4d4d4] text-sm">solar_tracker.ino</span>
            </div>
            <div class="flex-1 p-4 bg-[#1e1e1e] rounded-b-lg overflow-y-auto border border-[#2d2d2d] min-h-0">
              <div class="code-line">
                <span class="line-number">1</span>
                <span class="keyword">#include</span> <span class="string">&lt;WiFi.h&gt;</span>
              </div>
              <div class="code-line">
                <span class="line-number">2</span>
                <span class="keyword">#include</span> <span class="string">&lt;WebServer.h&gt;</span>
              </div>
              <div class="code-line">
                <span class="line-number">3</span>
              </div>
              <div class="code-line">
                <span class="line-number">4</span>
                <span class="keyword">const char</span>* <span class="variable">ssid</span> = <span class="string">"Arpit"</span>;
              </div>
              <div class="code-line">
                <span class="line-number">5</span>
                <span class="keyword">const char</span>* <span class="variable">password</span> = <span class="string">"12345678"</span>;
              </div>
              <div class="code-line">
                <span class="line-number">6</span>
              </div>
              <div class="code-line">
                <span class="line-number">7</span>
                <span class="keyword">const int</span> <span class="variable">ldrTopLeft</span> = <span class="number">35</span>;   <span class="comment">// GPIO34 for Top Left LDR</span>
              </div>
              <div class="code-line">
                <span class="line-number">8</span>
                <span class="keyword">const int</span> <span class="variable">ldrTopRight</span> = <span class="number">34</span>;  <span class="comment">// GPIO35 for Top Right LDR</span>
              </div>
              <div class="code-line">
                <span class="line-number">9</span>
                <span class="keyword">const int</span> <span class="variable">ldrBottomLeft</span> = <span class="number">32</span>; <span class="comment">// GPIO32 for Bottom Left LDR</span>
              </div>
              <div class="code-line">
                <span class="line-number">10</span>
                <span class="keyword">const int</span> <span class="variable">ldrBottomRight</span> = <span class="number">33</span>;
              </div>
              <div class="code-line">
                <span class="line-number">11</span>
              </div>
              <div class="code-line">
                <span class="line-number">12</span>
                <span class="keyword">int</span> <span class="variable">topLeft</span> = <span class="number">0</span>;
              </div>
              <div class="code-line">
                <span class="line-number">13</span>
                <span class="keyword">int</span> <span class="variable">topRight</span> = <span class="number">0</span>;
              </div>
              <div class="code-line">
                <span class="line-number">14</span>
                <span class="keyword">int</span> <span class="variable">bottomLeft</span> = <span class="number">0</span>;
              </div>
              <div class="code-line">
                <span class="line-number">15</span>
                <span class="keyword">int</span> <span class="variable">bottomRight</span> = <span class="number">0</span>;
              </div>
              <div class="code-line">
                <span class="line-number">16</span>
              </div>
              <div class="code-line">
                <span class="line-number">17</span>
                <span class="keyword">WebServer</span> <span class="variable">server</span>(<span class="number">80</span>); <span class="comment">// Web server runs on port 80</span>
              </div>
              <div class="code-line">
                <span class="line-number">18</span>
              </div>
              <div class="code-line">
                <span class="line-number">19</span>
                <span class="keyword">void</span> <span class="function">handleRoot</span>() {
              </div>
              <div class="code-line">
                <span class="line-number">20</span>
                &nbsp;&nbsp;<span class="keyword">String</span> <span class="variable">tl</span> = <span class="function">String</span>(<span class="variable">topLeft</span>);
              </div>
              <div class="code-line">
                <span class="line-number">21</span>
                &nbsp;&nbsp;<span class="keyword">String</span> <span class="variable">tr</span> = <span class="function">String</span>(<span class="variable">topRight</span>);
              </div>
              <div class="code-line">
                <span class="line-number">22</span>
                &nbsp;&nbsp;<span class="keyword">String</span> <span class="variable">bl</span> = <span class="function">String</span>(<span class="variable">bottomLeft</span>);
              </div>
              <div class="code-line">
                <span class="line-number">23</span>
                &nbsp;&nbsp;<span class="keyword">String</span> <span class="variable">br</span> = <span class="function">String</span>(<span class="variable">bottomRight</span>);
              </div>
              <div class="code-line">
                <span class="line-number">24</span>
                &nbsp;&nbsp;<span class="keyword">String</span> <span class="variable">tlf</span> = <span class="string">"TOP LEFT KI READING: "</span> + <span class="variable">tl</span> + <span class="string">"\n"</span>;
              </div>
              <div class="code-line">
                <span class="line-number">25</span>
                &nbsp;&nbsp;<span class="keyword">String</span> <span class="variable">trf</span> = <span class="string">"TOP RIGHT KI READING: "</span> + <span class="variable">tr</span> + <span class="string">"\n"</span>;
              </div>
              <div class="code-line">
                <span class="line-number">26</span>
                &nbsp;&nbsp;<span class="keyword">String</span> <span class="variable">blf</span> = <span class="string">"BOTTOM LEFT KI READING: "</span> + <span class="variable">bl</span> + <span class="string">"\n"</span>;
              </div>
              <div class="code-line">
                <span class="line-number">27</span>
                &nbsp;&nbsp;<span class="keyword">String</span> <span class="variable">brf</span> = <span class="string">"BOTTOM RIGHT KI READING: "</span> + <span class="variable">br</span> + <span class="string">"\n"</span>;
              </div>
              <div class="code-line">
                <span class="line-number">28</span>
                &nbsp;&nbsp;<span class="keyword">String</span> <span class="variable">f</span> = <span class="variable">tlf</span> + <span class="variable">trf</span> + <span class="variable">blf</span> + <span class="variable">brf</span>;
              </div>
              <div class="code-line">
                <span class="line-number">29</span>
                &nbsp;&nbsp;<span class="variable">server</span>.<span class="function">send</span>(<span class="number">200</span>, <span class="string">"text/plain"</span>, <span class="variable">f</span>);
              </div>
              <div class="code-line">
                <span class="line-number">30</span>
                }
              </div>
              <div class="code-line">
                <span class="line-number">31</span>
              </div>
              <div class="code-line">
                <span class="line-number">32</span>
                <span class="keyword">void</span> <span class="function">setup</span>() {
              </div>
              <div class="code-line">
                <span class="line-number">33</span>
                &nbsp;&nbsp;<span class="function">Serial</span>.begin(<span class="number">9600</span>);
              </div>
              <div class="code-line">
                <span class="line-number">34</span>
                &nbsp;&nbsp;<span class="function">WiFi</span>.begin(<span class="variable">ssid</span>, <span class="variable">password</span>);
              </div>
              <div class="code-line">
                <span class="line-number">35</span>
                &nbsp;&nbsp;<span class="function">Serial</span>.print(<span class="string">"Connecting to WiFi"</span>);
              </div>
              <div class="code-line">
                <span class="line-number">36</span>
                &nbsp;&nbsp;<span class="keyword">while</span> (<span class="function">WiFi</span>.status() != WL_CONNECTED) {
              </div>
              <div class="code-line">
                <span class="line-number">37</span>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="function">delay</span>(<span class="number">500</span>);
              </div>
              <div class="code-line">
                <span class="line-number">38</span>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="function">Serial</span>.println(<span class="string">"Connecting......"</span>);
              </div>
              <div class="code-line">
                <span class="line-number">39</span>
                &nbsp;&nbsp;}
              </div>
              <div class="code-line">
                <span class="line-number">40</span>
                &nbsp;&nbsp;<span class="function">Serial</span>.println(<span class="string">"\nConnected to WiFi!"</span>);
              </div>
              <div class="code-line">
                <span class="line-number">41</span>
                &nbsp;&nbsp;<span class="function">Serial</span>.println(<span class="function">WiFi</span>.localIP());
              </div>
              <div class="code-line">
                <span class="line-number">42</span>
                &nbsp;&nbsp;<span class="variable">server</span>.<span class="function">on</span>(<span class="string">"/"</span>, <span class="variable">handleRoot</span>);
              </div>
              <div class="code-line">
                <span class="line-number">43</span>
                &nbsp;&nbsp;<span class="variable">server</span>.<span class="function">begin</span>();
              </div>
              <div class="code-line">
                <span class="line-number">44</span>
                &nbsp;&nbsp;<span class="function">Serial</span>.println(<span class="string">"Server started"</span>);
              </div>
              <div class="code-line">
                <span class="line-number">45</span>
                }
              </div>
              <div class="code-line">
                <span class="line-number">46</span>
              </div>
              <div class="code-line">
                <span class="line-number">47</span>
                <span class="keyword">void</span> <span class="function">loop</span>() {
              </div>
              <div class="code-line">
                <span class="line-number">48</span>
                &nbsp;&nbsp;<span class="variable">topLeft</span> = <span class="function">analogRead</span>(<span class="variable">ldrTopLeft</span>);
              </div>
              <div class="code-line">
                <span class="line-number">49</span>
                &nbsp;&nbsp;<span class="variable">topRight</span> = <span class="function">analogRead</span>(<span class="variable">ldrTopRight</span>);
              </div>
              <div class="code-line">
                <span class="line-number">50</span>
                &nbsp;&nbsp;<span class="variable">bottomLeft</span> = <span class="function">analogRead</span>(<span class="variable">ldrBottomLeft</span>);
              </div>
              <div class="code-line">
                <span class="line-number">51</span>
                &nbsp;&nbsp;<span class="variable">bottomRight</span> = <span class="function">analogRead</span>(<span class="variable">ldrBottomRight</span>);
              </div>
              <div class="code-line">
                <span class="line-number">52</span>
                &nbsp;&nbsp;<span class="variable">server</span>.<span class="function">handleClient</span>();
              </div>
              <div class="code-line">
                <span class="line-number">53</span>
                }
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer class="bg-black/20 backdrop-blur-md py-8 mt-12 text-white">
      <div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 px-5">
        <div class="text-left">
          <h3 class="text-primary mb-4 text-lg font-bold">About SunSeekers</h3>
          <p class="text-white/80">Advanced dual-axis solar tracking system designed to maximize solar energy collection.</p>
        </div>
        
        <div class="text-left">
          <h3 class="text-primary mb-4 text-lg font-bold">Quick Links</h3>
          <p><a href="solar.html" class="text-white no-underline hover:text-primary transition-colors">Home</a></p>
          <p><a href="about.html" class="text-white no-underline hover:text-primary transition-colors">About</a></p>
          <p><a href="contact.html" class="text-white no-underline hover:text-primary transition-colors">Contact</a></p>
        </div>

        <div class="text-left">
          <h3 class="text-primary mb-4 text-lg font-bold">Connect With Us</h3>
          <div class="grid grid-cols-2 gap-2.5 mt-2.5">
            <a href="https://www.linkedin.com/in/arpitmishraz/" class="text-white no-underline p-2 rounded bg-white/10 hover:bg-white/20 transition-all flex items-center gap-2 justify-center hover:-translate-y-0.5">
              <img src="https://cdn.jsdelivr.net/npm/simple-icons@v5/icons/linkedin.svg" alt="LinkedIn" class="w-5 h-5 brightness-0 invert">
              LinkedIn
            </a>
            <a href="https://github.com/arpitmishra1547" class="text-white no-underline p-2 rounded bg-white/10 hover:bg-white/20 transition-all flex items-center gap-2 justify-center hover:-translate-y-0.5">
              <img src="https://cdn.jsdelivr.net/npm/simple-icons@v5/icons/github.svg" alt="GitHub" class="w-5 h-5 brightness-0 invert">
              GitHub
            </a>
            <a href="https://x.com/arpitmishra1547" class="text-white no-underline p-2 rounded bg-white/10 hover:bg-white/20 transition-all flex items-center gap-2 justify-center hover:-translate-y-0.5">
              <img src="https://cdn.jsdelivr.net/npm/simple-icons@v5/icons/twitter.svg" alt="Twitter" class="w-5 h-5 brightness-0 invert">
              Twitter
            </a>
            <a href="https://www.instagram.com/arpitmishraz/" class="text-white no-underline p-2 rounded bg-white/10 hover:bg-white/20 transition-all flex items-center gap-2 justify-center hover:-translate-y-0.5">
              <img src="https://cdn.jsdelivr.net/npm/simple-icons@v5/icons/instagram.svg" alt="Instagram" class="w-5 h-5 brightness-0 invert">
              Instagram
            </a>
          </div>
        </div>

        <div class="text-left">
          <h3 class="text-primary mb-4 text-lg font-bold">Contact Info</h3>
          <p class="text-white/80">LNCT College, Bhopal</p>
          <p class="text-white/80">Email: arpitmishra1547@gmail.com</p>
          <p class="text-white/80">Phone: +91 9977006842</p>
        </div>
      </div>

      <div class="text-center pt-5 mt-5 border-t border-white/10 text-white/60">
        <p>&copy; 2024 SunSeekers. All rights reserved. | Developed by IoT Department, LNCT College</p>
      </div>
    </footer>

    <script src="darkMode.js"></script>
    <script>
      // Typing animation
      const fullText = "Dual-Axis Solar Tracker Dashboard";
      const typingText = document.getElementById('typingText');
      let currentIndex = 0;
      let typingDelay = 80;

      function typeText() {
        if (currentIndex < fullText.length) {
          typingText.innerHTML = fullText.substring(0, currentIndex + 1);
          currentIndex++;
          setTimeout(typeText, typingDelay);
        }
      }

      // Start the typing animation
      typeText();

      // Add Graph Configuration
      let ldrChart;
      const maxDataPoints = 50; // Number of points to show on graph
      const chartData = {
        labels: [],
        datasets: [
          {
            label: 'Top Left LDR',
            data: [],
            borderColor: '#ff0000',
            backgroundColor: 'rgba(255, 0, 0, 0.1)',
            tension: 0.4,
            fill: true
          },
          {
            label: 'Top Right LDR',
            data: [],
            borderColor: '#00ff00',
            backgroundColor: 'rgba(0, 255, 0, 0.1)',
            tension: 0.4,
            fill: true
          },
          {
            label: 'Bottom Left LDR',
            data: [],
            borderColor: '#0000ff',
            backgroundColor: 'rgba(0, 0, 255, 0.1)',
            tension: 0.4,
            fill: true
          },
          {
            label: 'Bottom Right LDR',
            data: [],
            borderColor: '#ffff00',
            backgroundColor: 'rgba(255, 255, 0, 0.1)',
            tension: 0.4,
            fill: true
          }
        ]
      };

      // Initialize Chart
      function initChart() {
        const ctx = document.getElementById('ldrGraph').getContext('2d');
        ldrChart = new Chart(ctx, {
          type: 'line',
          data: chartData,
          options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
              y: {
                beginAtZero: true,
                max: 4095,
                grid: {
                  color: 'rgba(255, 255, 255, 0.1)'
                },
                ticks: {
                  color: 'rgba(255, 255, 255, 0.8)'
                }
              },
              x: {
                grid: {
                  color: 'rgba(255, 255, 255, 0.1)'
                },
                ticks: {
                  color: 'rgba(255, 255, 255, 0.8)'
                }
              }
            },
            plugins: {
              legend: {
                labels: {
                  color: 'rgba(255, 255, 255, 0.8)'
                }
              },
              tooltip: {
                mode: 'index',
                intersect: false,
                backgroundColor: 'rgba(0, 0, 0, 0.8)',
                titleColor: '#fff',
                bodyColor: '#fff'
              }
            },
            interaction: {
              mode: 'nearest',
              axis: 'x',
              intersect: false
            }
          }
        });
      }

      // Update Chart with new data
      function updateChart(tl, tr, bl, br) {
        const now = new Date();
        const timeStr = now.toLocaleTimeString();
        
        // Add new data point
        chartData.labels.push(timeStr);
        chartData.datasets[0].data.push(tl);
        chartData.datasets[1].data.push(tr);
        chartData.datasets[2].data.push(bl);
        chartData.datasets[3].data.push(br);
        
        // Remove old data points if exceeding maxDataPoints
        if (chartData.labels.length > maxDataPoints) {
          chartData.labels.shift();
          chartData.datasets.forEach(dataset => dataset.data.shift());
        }
        
        // Update chart
        ldrChart.update();
      }

      // Add Gauge Charts Configuration
      let horizontalGauge, verticalGauge;

      function initGauges() {
        // Horizontal Gauge
        const horizontalCtx = document.getElementById('horizontalGauge').getContext('2d');
        horizontalGauge = new Chart(horizontalCtx, {
          type: 'doughnut',
          data: {
            datasets: [{
              data: [0, 360],
              backgroundColor: [
                'rgba(255, 99, 132, 0.8)',
                'rgba(255, 255, 255, 0.1)'
              ],
              borderWidth: 0,
              circumference: 180,
              rotation: -90
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            cutout: '80%',
            plugins: {
              legend: {
                display: false
              },
              tooltip: {
                enabled: false
              }
            }
          }
        });

        // Vertical Gauge
        const verticalCtx = document.getElementById('verticalGauge').getContext('2d');
        verticalGauge = new Chart(verticalCtx, {
          type: 'doughnut',
          data: {
            datasets: [{
              data: [0, 360],
              backgroundColor: [
                'rgba(54, 162, 235, 0.8)',
                'rgba(255, 255, 255, 0.1)'
              ],
              borderWidth: 0,
              circumference: 180,
              rotation: -90
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            cutout: '80%',
            plugins: {
              legend: {
                display: false
              },
              tooltip: {
                enabled: false
              }
            }
          }
        });
      }

      function updateGauges(horizontal, vertical) {
        // Update Horizontal Gauge
        horizontalGauge.data.datasets[0].data = [horizontal, 360 - horizontal];
        horizontalGauge.update();
        document.getElementById('horizontalGaugeValue').textContent = `${Math.round(horizontal)}°`;

        // Update Vertical Gauge
        verticalGauge.data.datasets[0].data = [vertical, 360 - vertical];
        verticalGauge.update();
        document.getElementById('verticalGaugeValue').textContent = `${Math.round(vertical)}°`;
      }

      // Modify the existing getData function to update the gauges
      async function getData() {
        try {
          const response = await fetch("http://192.168.3.247");
          if (!response.ok) {
            throw new Error("Network response was not ok");
          }
          const data = await response.json();
          
          // Update LDR readings
          document.getElementById("TL").textContent = data.TL;
          document.getElementById("TR").textContent = data.TR;
          document.getElementById("BL").textContent = data.BL;
          document.getElementById("BR").textContent = data.BR;

          // Update chart with new readings
          updateChart(data.TL, data.TR, data.BL, data.BR);

          // Update servo angles and gauges
          const horizontalAngle = data.horizontalAngle || 0;
          const verticalAngle = data.verticalAngle || 0;
          document.getElementById("horizontalAngle").textContent = horizontalAngle;
          document.getElementById("verticalAngle").textContent = verticalAngle;
          updateGauges(horizontalAngle, verticalAngle);

          // Save data to MongoDB
          try {
            const saveResponse = await fetch('http://localhost:3000/api/sensor-data', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify({
                TL: data.TL,
                TR: data.TR,
                BL: data.BL,
                BR: data.BR,
                horizontalAngle: horizontalAngle,
                verticalAngle: verticalAngle
              })
            });
            
            if (!saveResponse.ok) {
              console.error('Error saving data to MongoDB');
            }
          } catch (saveError) {
            console.error('Error saving data to MongoDB:', saveError);
          }

          // Add timestamp
          const timestamp = new Date().toLocaleTimeString();
          document.querySelectorAll('.sensor-card, .servo-card').forEach(card => {
            if (!card.querySelector('.timestamp')) {
              const timeDiv = document.createElement('div');
              timeDiv.className = 'timestamp';
              card.appendChild(timeDiv);
            }
            card.querySelector('.timestamp').textContent = `Last updated: ${timestamp}`;
          });

        } catch (error) {
          console.error("Error fetching data:", error);
          document.querySelectorAll('.status-indicator').forEach(indicator => {
            indicator.className = 'status-indicator status-inactive';
          });
        }
      }

      // Initialize gauges when the page loads
      document.addEventListener('DOMContentLoaded', function() {
        initChart();
        initGauges();
        getData();
        setInterval(getData, 1000);
      });

      // Updated animation script
      let animationInterval;
      let currentAngle = 0;
      const solarPanel = document.getElementById('solarPanel');
      const statusDisplay = document.getElementById('statusDisplay');
      const sun = document.querySelector('.animate-sun-path');

      function startAnimation() {
        if (animationInterval) return;
        
        statusDisplay.textContent = "Animation running - Solar panel tracking the sun";
        animationInterval = setInterval(() => {
          const sunRect = sun.getBoundingClientRect();
          const panelRect = solarPanel.getBoundingClientRect();
          
          // Calculate center points
          const sunCenterX = sunRect.left + sunRect.width / 2;
          const sunCenterY = sunRect.top + sunRect.height / 2;
          const panelCenterX = panelRect.left + panelRect.width / 2;
          const panelCenterY = panelRect.top + panelRect.height / 2;
          
          // Calculate angle between sun and panel
          const dx = sunCenterX - panelCenterX;
          const dy = sunCenterY - panelCenterY;
          const angle = Math.atan2(dy, dx) * (180 / Math.PI);
          
          // Apply rotation with smooth transition
          solarPanel.style.transform = `translateX(-50%) rotate(${angle}deg)`;
          
          // Update LDR indicators based on angle
          updateLDRIndicators(angle);
          
          // Update status with current angle
          statusDisplay.textContent = `Tracking sun at ${Math.round(angle)}°`;
        }, 50); // Increased update frequency for smoother animation
      }

      function stopAnimation() {
        if (animationInterval) {
          clearInterval(animationInterval);
          animationInterval = null;
          statusDisplay.textContent = "Animation paused";
        }
      }

      function resetAnimation() {
        stopAnimation();
        solarPanel.style.transform = 'translateX(-50%) rotate(0deg)';
        document.querySelectorAll('.ldr-indicator').forEach(ldr => {
          ldr.style.background = '#e74c3c';
        });
        statusDisplay.textContent = "Animation reset - Click 'Start Animation' to begin";
      }

      function updateLDRIndicators(angle) {
        const ldrIndicators = document.querySelectorAll('.ldr-indicator');
        const normalizedAngle = (angle + 360) % 360; // Normalize angle to 0-360
        
        ldrIndicators.forEach((ldr, index) => {
          // Calculate brightness based on angle and LDR position
          let brightness;
          switch(index) {
            case 0: // Top Left
              brightness = Math.cos((normalizedAngle - 45) * Math.PI / 180);
              break;
            case 1: // Top Right
              brightness = Math.cos((normalizedAngle - 135) * Math.PI / 180);
              break;
            case 2: // Bottom Left
              brightness = Math.cos((normalizedAngle - 225) * Math.PI / 180);
              break;
            case 3: // Bottom Right
              brightness = Math.cos((normalizedAngle - 315) * Math.PI / 180);
              break;
          }
          
          // Ensure brightness is between 0 and 1
          brightness = Math.max(0, Math.min(1, brightness));
          
          // Update LDR color based on brightness
          const red = Math.round(255 - brightness * 200);
          const green = Math.round(brightness * 100);
          const blue = Math.round(brightness * 50);
          ldr.style.background = `rgb(${red}, ${green}, ${blue})`;
        });
      }
    </script>
  </body>
</html>